###### redis 分布式锁。mysql。jvm synchronized
###### redis是加过期时间，因为可能执行的报错，会一直上锁
###### redis的原子性ex
###### 时间过期，程序没有执行完；然后删除了另一个进来的加锁的key
###### 加看门狗，任务没有执行完，就重新刷新过期时间；每一个线程生成一个唯一的id，在执行完以后判断是否是自己生成的id，不是就不处理
###### gc的stw，可能会导致导致看门狗没有刷新：解决方案是zk的临时顺序文件，每一次连接，返回都会+1，把这个数值入到mysql，在执行业务逻辑的时候判断mysql的数值，是否与自己的set的进去的一致，不一致，不执行逻辑
###### redis一般都是单节点，搞成哨兵模式还是会有问题，主从没有同步就是出现超发的问题。
###### 搞成红锁，超过半数的添加成功就算成功，执行完成后再依次删除